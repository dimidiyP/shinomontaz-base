/*! For license information please see main.39c4e7f3.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),l=n(43),a=n(950);function o(e){var t="https://3cc7adb6-cebf-4857-aa70-c0589b4942bb.preview.emergentagent.com";const f=function(){var e,t,n,l,a,o;const[i,s]=(0,r.useState)(!1),[f,m]=(0,r.useState)(null),[p,h]=(0,r.useState)("login"),[g,b]=(0,r.useState)(null),[y,x]=(0,r.useState)(!1),[v,w]=(0,r.useState)(""),[k,N]=(0,r.useState)(""),[j,S]=(0,r.useState)({username:"",password:""}),[_,C]=(0,r.useState)({full_name:"",phone:"",phone_additional:"",car_brand:"",parameters:"",size:"",storage_location:""}),[E,z]=(0,r.useState)({query:"",searchType:"record_number"}),[P,T]=(0,r.useState)([]),[L,O]=(0,r.useState)([]),[D,R]=(0,r.useState)(null),[A,F]=(0,r.useState)([]),[M,I]=(0,r.useState)({}),[U,H]=(0,r.useState)({key:null,direction:"asc"}),[B,$]=(0,r.useState)([]),[V,q]=(0,r.useState)({username:"",password:"",role:"user",permissions:["store","view"]}),[W,Q]=(0,r.useState)(null),[K,Y]=(0,r.useState)(""),[G,X]=(0,r.useState)(null),[J,Z]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(null),[ne,re]=(0,r.useState)(!1),[le,ae]=(0,r.useState)(!1),[oe,ie]=(0,r.useState)(new Set),[se,ce]=(0,r.useState)({}),[ue,de]=(0,r.useState)("passenger"),[fe,me]=(0,r.useState)("R16"),[pe,he]=(0,r.useState)(4),[ge,be]=(0,r.useState)([]),[ye,xe]=(0,r.useState)([]),[ve,we]=(0,r.useState)(null),[ke,Ne]=(0,r.useState)(null),[je,Se]=(0,r.useState)(!1),[_e,Ce]=(0,r.useState)({}),[Ee,ze]=(0,r.useState)({}),[Pe,Te]=(0,r.useState)("passenger"),[Le,Oe]=(0,r.useState)(!1),De=(window.location.pathname.startsWith("/calculator"),async e=>{try{const t=await fetch("".concat(d,"/api/calculator/settings/").concat(e));if(t.ok){const n=await t.json();ce(t=>c(c({},t),{},{[e]:n}))}else w("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430")}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}}),Re=async()=>{try{const e={vehicle_type:ue,tire_size:fe,wheel_count:pe,selected_services:ge,additional_options:ye},t=await fetch("".concat(d,"/api/calculator/save-result"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const e=await t.json(),n="".concat(window.location.origin,"/calculator/result/").concat(e.short_id);if(we(e=>c(c({},e),{},{saved_link:n})),navigator.clipboard)await navigator.clipboard.writeText(n),N("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430!");else{const e=document.createElement("textarea");e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),N("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430!")}return e.short_id}w("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430")}catch(e){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}},Ae=e=>{be(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Fe=e=>{xe(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Me=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(d,"/api/admin/calculator/settings"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json(),n={};e.forEach(e=>{n[e.vehicle_type]=e}),ze(n)}else w("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430")}catch(e){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}},Ie=e=>{let t="asc";U.key===e&&"asc"===U.direction&&(t="desc"),H({key:e,direction:t}),F(((e,t,n)=>[...e].sort((e,r)=>{let l=e[t],a=r[t];if("record_number"===t)return"asc"===n?l-a:a-l;if("created_at"===t)return l=new Date(l),a=new Date(a),"asc"===n?l-a:a-l;if("string"===typeof l&&"string"===typeof a){l=l.toLowerCase(),a=a.toLowerCase();const e=/[\u0430-\u044f]/.test(l),t=/[\u0430-\u044f]/.test(a);return e&&!t?"asc"===n?-1:1:!e&&t?"asc"===n?1:-1:"asc"===n?l.localeCompare(a):a.localeCompare(l)}return 0}))(A,e,t))},Ue=async e=>{if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u043f\u0438\u0441\u044c? \u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c."))try{const t=localStorage.getItem("token");(await fetch("".concat(d,"/api/storage-records/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok?(N("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),Ye()):w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0438")}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}};(0,r.useEffect)(()=>{De("passenger"),De("truck");const e=localStorage.getItem("token"),t=localStorage.getItem("user"),n=window.location.pathname;if(console.log("Current path:",n),console.log("Is calculator path:",n.startsWith("/calculator")),n.startsWith("/calculator")){if(console.log("Setting calculator page"),"/calculator"===n)h("public-calculator");else if(n.includes("/result/")){const e=n.split("/result/")[1];h("calculator-result"),setTimeout(()=>{(async e=>{try{const t=await fetch("".concat(d,"/api/calculator/result/").concat(e));if(t.ok){const e=await t.json();Ne(e)}else 410===t.status?w("\u0421\u0441\u044b\u043b\u043a\u0430 \u0438\u0441\u0442\u0435\u043a\u043b\u0430 (\u0441\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f 7 \u0434\u043d\u0435\u0439)"):w("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}})(e)},100)}}else e&&t&&(s(!0),m(JSON.parse(t)),h("dashboard"),$e())},[]),(0,r.useEffect)(()=>{F(He(L,M))},[L,M]),(0,r.useEffect)(()=>{"pdf-config"!==p||J||Ve(),"public-calculator"===p&&De("passenger")},[p,J]);const He=(e,t)=>e.filter(e=>Object.keys(t).every(n=>{var r;if(!t[n])return!0;const l=(null===(r=e[n])||void 0===r?void 0:r.toString().toLowerCase())||"",a=t[n].toLowerCase();return l.includes(a)})),Be=async e=>{e.preventDefault(),x(!0),w("");try{const e=await fetch("".concat(d,"/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),t=await e.json();e.ok?(localStorage.setItem("token",t.access_token),localStorage.setItem("user",JSON.stringify(t.user)),s(!0),m(t.user),h("dashboard"),await $e()):w(t.detail||"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0445\u043e\u0434\u0430")}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}finally{x(!1)}},$e=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(d,"/api/form-config"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();b(e),Q(e)}}catch(e){console.error("Error loading form config:",e)}},Ve=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(d,"/api/pdf-template"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();Y(e.template),Z(!0),N("\u0428\u0430\u0431\u043b\u043e\u043d \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0438\u0437 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445")}else w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430")}catch(e){console.error("Error loading PDF template:",e),w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430")}},qe=async e=>{e.preventDefault(),x(!0),w("");try{const e=localStorage.getItem("token"),t=await fetch("".concat(d,"/api/storage-records/search?query=").concat(encodeURIComponent(E.query),"&search_type=").concat(E.searchType),{headers:{Authorization:"Bearer ".concat(e)}}),n=await t.json();t.ok?T(n.records):w(n.detail||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0438\u0441\u043a\u0430")}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}finally{x(!1)}},We=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},Qe=async e=>{if(window.confirm("\u0412\u0437\u044f\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435?")){x(!0);try{const t=localStorage.getItem("token"),n=await fetch("".concat(d,"/api/storage-records/").concat(e,"/take-storage"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t)}}),r=await n.json();n.ok?(N("\u0417\u0430\u043f\u0438\u0441\u044c \u0432\u0437\u044f\u0442\u0430 \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"),qe({preventDefault:()=>{}})):w(r.detail||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u0437\u044f\u0442\u0438\u0438 \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435")}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}finally{x(!1)}}},Ke=async e=>{if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0434\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0443? \u0417\u0430\u0431\u0440\u0430\u043b\u0438 \u043b\u0438 \u0432\u044b \u0430\u043a\u0442?")){x(!0);try{const t=localStorage.getItem("token"),n=await fetch("".concat(d,"/api/storage-records/").concat(e,"/release"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t)}}),r=await n.json();n.ok?(N("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u044b\u0434\u0430\u043d\u0430 \u0441 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"),qe({preventDefault:()=>{}})):w(r.detail||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u0434\u0430\u0447\u0435")}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}finally{x(!1)}}},Ye=async()=>{x(!0);try{const e=localStorage.getItem("token"),t=await fetch("".concat(d,"/api/storage-records"),{headers:{Authorization:"Bearer ".concat(e)}}),n=await t.json();t.ok?O(n.records):w(n.detail||"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0437\u0430\u043f\u0438\u0441\u0435\u0439")}catch(e){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}finally{x(!1)}},Ge=async e=>{try{const t=localStorage.getItem("token"),n=await fetch("".concat(d,"/api/storage-records/").concat(e,"/pdf"),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const t=await n.blob(),r=window.URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download="act_".concat(e,".pdf"),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(r),document.body.removeChild(l),N("PDF \u0430\u043a\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d")}else w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 PDF")}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}},Xe=e=>{if(!g)return e;const t=g.find(t=>t.name===e);return t?t.label:e};(0,r.useEffect)(()=>{ge.length>0&&se[ue]&&(async()=>{try{const e={vehicle_type:ue,tire_size:fe,wheel_count:pe,selected_services:ge,additional_options:ye},t=await fetch("".concat(d,"/api/calculator/calculate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const e=await t.json();we(e)}else w("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438")}catch(e){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}})()},[ue,fe,pe,ge,ye]);const Je=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(d,"/api/users"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();$(e.users)}else w("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439")}catch(e){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}},Ze=e=>f&&f.permissions.includes(e),et=()=>{w(""),N("")},tt=window.location.pathname.startsWith("/calculator");var nt;return!i&&tt?(console.log("Rendering calculator without authentication"),(0,u.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,u.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,u.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 \u0428\u0438\u043d\u043e\u043c\u043e\u043d\u0442\u0430\u0436\u0430"}),(0,u.jsx)("p",{className:"text-gray-600 mb-8",children:"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0443\u0441\u043b\u0443\u0433 \u0448\u0438\u043d\u043e\u043c\u043e\u043d\u0442\u0430\u0436\u0430 \u043e\u043d\u043b\u0430\u0439\u043d"}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"}),(0,u.jsxs)("div",{className:"flex space-x-4",children:[(0,u.jsx)("button",{onClick:()=>{de("passenger"),De("passenger")},className:"px-6 py-3 rounded-lg font-medium ".concat("passenger"===ue?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"\u041b\u0435\u0433\u043a\u043e\u0432\u043e\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c"}),(0,u.jsx)("button",{onClick:()=>{de("truck"),De("truck")},className:"px-6 py-3 rounded-lg font-medium ".concat("truck"===ue?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"\u0413\u0440\u0443\u0437\u043e\u0432\u043e\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c"})]})]}),se[ue]&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0438\u043d"}),(0,u.jsx)("select",{value:fe,onChange:e=>me(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.keys((null===(nt=se[ue].services[0])||void 0===nt?void 0:nt.time_by_size)||{}).map(e=>(0,u.jsx)("option",{value:e,children:e},e))})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043b\u0435\u0441"}),(0,u.jsx)("div",{className:"flex space-x-4",children:[1,2,4].map(e=>(0,u.jsxs)("button",{onClick:()=>he(e),className:"px-4 py-2 rounded-lg font-medium ".concat(pe===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[e," ",1===e?"\u043a\u043e\u043b\u0435\u0441\u043e":"\u043a\u043e\u043b\u0435\u0441\u0430"]},e))})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0423\u0441\u043b\u0443\u0433\u0438"}),(0,u.jsx)("div",{className:"space-y-3",children:se[ue].services.map(e=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",id:e.id,checked:ge.includes(e.id),onChange:()=>Ae(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,u.jsx)("div",{className:"ml-3",children:(0,u.jsx)("label",{htmlFor:e.id,className:"text-sm font-medium text-gray-900 cursor-pointer",children:e.name})})]}),(0,u.jsx)("div",{className:"flex items-center",children:(0,u.jsx)("button",{onClick:()=>{return t=e.name,n=e.description,Ce({title:t,description:n}),void Se(!0);var t,n},className:"text-blue-600 hover:text-blue-800 ml-2",children:(0,u.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})})]},e.id))})]}),se[ue].additional_options.length>0&&(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u043f\u0446\u0438\u0438"}),(0,u.jsx)("div",{className:"space-y-3",children:se[ue].additional_options.map(e=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",id:e.id,checked:ye.includes(e.id),onChange:()=>Fe(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,u.jsxs)("div",{className:"ml-3",children:[(0,u.jsx)("label",{htmlFor:e.id,className:"text-sm font-medium text-gray-900 cursor-pointer",children:e.name}),(0,u.jsxs)("p",{className:"text-sm text-gray-500",children:["\xd7",e.time_multiplier]})]})]}),(0,u.jsx)("button",{onClick:()=>je(e.name,e.description),className:"text-blue-600 hover:text-blue-800 ml-2",children:(0,u.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})]},e.id))})]}),ve&&(0,u.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0440\u0430\u0441\u0447\u0435\u0442\u0430"}),(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("p",{className:"text-sm text-blue-700",children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c:"}),(0,u.jsxs)("p",{className:"text-3xl font-bold text-blue-900",children:[ve.total_cost," \u0440\u0443\u0431\u043b\u0435\u0439"]})]})}),ve.saved_link&&(0,u.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,u.jsx)("p",{className:"text-sm text-green-700 mb-2",children:"\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0440\u0430\u0441\u0447\u0435\u0442\u0430:"}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("input",{type:"text",value:ve.saved_link,readOnly:!0,className:"flex-1 px-3 py-2 text-sm border border-green-300 rounded-lg bg-white"}),(0,u.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(ve.saved_link),N("\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430!")},className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg",children:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),(0,u.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u0430 7 \u0434\u043d\u0435\u0439"})]}),(0,u.jsx)("button",{onClick:Re,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:ve.saved_link?"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"})]})]})]})})})})):i?(0,u.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,u.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,u.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\u0425\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0428\u0438\u043d"}),(0,u.jsx)("span",{className:"ml-4 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:"admin"===(null===f||void 0===f?void 0:f.role)?"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440":"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("span",{className:"text-gray-700",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",null===f||void 0===f?void 0:f.username,"!"]}),(0,u.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s(!1),m(null),h("login")},className:"text-gray-500 hover:text-gray-700 px-3 py-1 rounded-md text-sm font-medium",children:"\u0412\u044b\u0439\u0442\u0438"})]})]})})}),(0,u.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["dashboard"===p&&(0,u.jsxs)("div",{className:"mb-8",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"\u041f\u0430\u043d\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Ze("store")&&(0,u.jsxs)("button",{onClick:()=>{h("store"),et()},className:"bg-green-600 hover:bg-green-700 text-white p-6 rounded-xl shadow-lg transition-colors",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"}),(0,u.jsx)("p",{className:"text-green-100",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0448\u0438\u043d"})]}),Ze("release")&&(0,u.jsxs)("button",{onClick:()=>{h("release"),et()},className:"bg-orange-600 hover:bg-orange-700 text-white p-6 rounded-xl shadow-lg transition-colors",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"\u0412\u044b\u0434\u0430\u0442\u044c \u0441 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"}),(0,u.jsx)("p",{className:"text-orange-100",children:"\u041d\u0430\u0439\u0442\u0438 \u0438 \u0432\u044b\u0434\u0430\u0442\u044c \u0448\u0438\u043d\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0443"})]}),Ze("view")&&(0,u.jsxs)("button",{onClick:()=>{h("records"),Ye(),et()},className:"bg-blue-600 hover:bg-blue-700 text-white p-6 rounded-xl shadow-lg transition-colors",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u043f\u0438\u0441\u0435\u0439"}),(0,u.jsx)("p",{className:"text-blue-100",children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u0441\u0434\u0435\u043b\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438"})]}),Ze("user_management")&&(0,u.jsxs)("button",{onClick:()=>{h("users"),Je(),et()},className:"bg-purple-600 hover:bg-purple-700 text-white p-6 rounded-xl shadow-lg transition-colors",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438"}),(0,u.jsx)("p",{className:"text-purple-100",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"})]}),Ze("form_management")&&(0,u.jsxs)("button",{onClick:()=>{h("form-config"),et()},className:"bg-indigo-600 hover:bg-indigo-700 text-white p-6 rounded-xl shadow-lg transition-colors",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b \u0437\u0430\u043f\u0438\u0441\u0438"}),(0,u.jsx)("p",{className:"text-indigo-100",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043f\u043e\u043b\u044f \u0444\u043e\u0440\u043c\u044b \u0437\u0430\u043f\u0438\u0441\u0438"})]}),Ze("pdf_management")&&(0,u.jsxs)("button",{onClick:()=>{h("pdf-config"),et()},className:"bg-teal-600 hover:bg-teal-700 text-white p-6 rounded-xl shadow-lg transition-colors",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b \u0410\u043a\u0442\u0430"}),(0,u.jsx)("p",{className:"text-teal-100",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d PDF \u0430\u043a\u0442\u0430"})]}),Ze("calculator_management")&&(0,u.jsxs)("button",{onClick:()=>{h("calculator-admin"),et()},className:"bg-purple-600 hover:bg-purple-700 text-white p-6 rounded-xl shadow-lg transition-colors",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u043e\u043c"}),(0,u.jsx)("p",{className:"text-purple-100",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0438 \u0438 \u0446\u0435\u043d\u044b \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430"})]}),Ze("calculator_management")&&(0,u.jsxs)("button",{onClick:()=>{h("calculator-admin"),et()},className:"bg-purple-600 hover:bg-purple-700 text-white p-6 rounded-xl shadow-lg transition-colors",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u043e\u043c"}),(0,u.jsx)("p",{className:"text-purple-100",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0438 \u0438 \u0446\u0435\u043d\u044b \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430"})]})]})]}),v&&(0,u.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex justify-between items-center",children:[(0,u.jsx)("span",{children:v}),(0,u.jsx)("button",{onClick:()=>w(""),className:"text-red-400 hover:text-red-600",children:"\xd7"})]}),k&&(0,u.jsxs)("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-lg flex justify-between items-center",children:[(0,u.jsx)("span",{children:k}),(0,u.jsx)("button",{onClick:()=>N(""),className:"text-green-400 hover:text-green-600",children:"\xd7"})]}),"store"===p&&Ze("store")&&(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"}),(0,u.jsx)("button",{onClick:()=>h("dashboard"),className:"text-gray-500 hover:text-gray-700 px-3 py-1 rounded-md text-sm font-medium",children:"\u2190 \u041d\u0430\u0437\u0430\u0434"})]}),D&&(0,u.jsxs)("div",{className:"mb-8 p-6 bg-green-50 border border-green-200 rounded-lg",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430!"}),(0,u.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440:"})," ",D.record_number]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"ID \u0437\u0430\u043f\u0438\u0441\u0438:"})," ",D.record_id]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u0421\u0442\u0430\u0442\u0443\u0441:"})," ",D.status]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u0412\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f:"})," ",new Date(D.created_at).toLocaleString("ru-RU")]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u0421\u043e\u0437\u0434\u0430\u043b:"})," ",D.created_by]})]}),(0,u.jsxs)("div",{className:"mt-4 flex space-x-4",children:[(0,u.jsx)("button",{onClick:()=>Ge(D.record_id),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0430\u043a\u0442"}),(0,u.jsx)("button",{onClick:()=>R(null),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c"})]})]}),(0,u.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),x(!0),w(""),N("");try{const e=localStorage.getItem("token"),t=await fetch("".concat(d,"/api/storage-records"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(_)}),n=await t.json();t.ok?(N("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430!"),R(n.record),C({full_name:"",phone:"",phone_additional:"",car_brand:"",parameters:"",size:"",storage_location:""})):w(n.detail||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0438")}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}finally{x(!1)}},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g&&g.fields&&g.fields.map(e=>(0,u.jsxs)("div",{className:"select"===e.type||"parameters"===e.name?"md:col-span-2":"",children:[(0,u.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label," ",e.required&&"*"]}),"select"===e.type?(0,u.jsxs)("select",{value:_[e.name]||"",onChange:t=>C(c(c({},_),{},{[e.name]:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:e.required,children:[(0,u.jsxs)("option",{value:"",children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 ",e.label.toLowerCase()]}),e.options&&e.options.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]}):(0,u.jsx)("input",{type:"tel"===e.type?"tel":"email"===e.type?"email":"text",value:_[e.name]||"",onChange:t=>{let n=t.target.value;"phone"!==e.name&&"phone_additional"!==e.name||(n=n.slice(0,14)),C(c(c({},_),{},{[e.name]:n}))},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ".concat(e.label.toLowerCase()),required:e.required,maxLength:"phone"===e.name||"phone_additional"===e.name?14:void 0})]},e.name)),(0,u.jsx)("div",{className:"md:col-span-2",children:(0,u.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 font-medium",children:y?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438...":"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"})})]})]}),"release"===p&&Ze("release")&&(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\u0412\u044b\u0434\u0430\u0442\u044c \u0441 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"}),(0,u.jsx)("button",{onClick:()=>h("dashboard"),className:"text-gray-500 hover:text-gray-700 px-3 py-1 rounded-md text-sm font-medium",children:"\u2190 \u041d\u0430\u0437\u0430\u0434"})]}),(0,u.jsx)("form",{onSubmit:qe,className:"mb-8",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0422\u0438\u043f \u043f\u043e\u0438\u0441\u043a\u0430"}),(0,u.jsxs)("select",{value:E.searchType,onChange:e=>z(c(c({},E),{},{searchType:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,u.jsx)("option",{value:"record_number",children:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440"}),(0,u.jsx)("option",{value:"full_name",children:"\u0424\u0418\u041e"}),(0,u.jsx)("option",{value:"phone",children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u041f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441"}),(0,u.jsx)("input",{type:"text",value:E.query,onChange:e=>z(c(c({},E),{},{query:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430",required:!0})]}),(0,u.jsx)("div",{className:"flex items-end",children:(0,u.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-orange-600 text-white py-3 px-4 rounded-lg hover:bg-orange-700 focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:opacity-50 font-medium",children:y?"\u041f\u043e\u0438\u0441\u043a...":"\u041d\u0430\u0439\u0442\u0438"})})]})}),P.length>0&&(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430:"}),P.map(e=>(0,u.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u041d\u043e\u043c\u0435\u0440:"})," ",e.record_number]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u0424\u0418\u041e:"})," ",e.full_name]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"})," ",e.phone]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u041c\u0430\u0448\u0438\u043d\u0430:"})," ",e.car_brand]})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:"})," ",e.parameters]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u0420\u0430\u0437\u043c\u0435\u0440:"})," ",e.size]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u041c\u0435\u0441\u0442\u043e:"})," ",e.storage_location]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u0421\u0442\u0430\u0442\u0443\u0441:"})," ",e.status]})]})]}),(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,u.jsxs)("p",{children:["\u0421\u043e\u0437\u0434\u0430\u043d\u043e: ",new Date(e.created_at).toLocaleString("ru-RU")]}),(0,u.jsxs)("p",{children:["\u0421\u043e\u0437\u0434\u0430\u043b: ",e.created_by]}),e.retail_status_text&&(0,u.jsxs)("p",{children:["\u0421\u0442\u0430\u0442\u0443\u0441 \u0432 Retail: ",(0,u.jsx)("span",{className:"font-medium",children:e.retail_status_text})]})]}),(0,u.jsxs)("div",{className:"flex space-x-2",children:["\u041d\u043e\u0432\u0430\u044f"===e.status&&(0,u.jsx)("button",{onClick:()=>Qe(e.record_id),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"\u0412\u0437\u044f\u0442\u044c \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"}),"\u0412\u0437\u044f\u0442\u0430 \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"===e.status&&(0,u.jsx)("button",{onClick:()=>Ke(e.record_id),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium",children:"\u0412\u044b\u0434\u0430\u0442\u044c \u0441 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"})]})]})]},e.record_id))]}),0===P.length&&E.query&&!y&&(0,u.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0417\u0430\u043f\u0438\u0441\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"})]}),"records"===p&&Ze("view")&&(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u043f\u0438\u0441\u0435\u0439"}),(0,u.jsxs)("div",{className:"flex space-x-4",children:["admin"===(null===f||void 0===f?void 0:f.role)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{onClick:async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat(d,"/api/storage-records/export/excel"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.blob(),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="storage_records_".concat((new Date).toISOString().split("T")[0],".xlsx"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(n),document.body.removeChild(r),N("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b")}else w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0445")}catch(e){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0432 Excel"}),(0,u.jsxs)("label",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium cursor-pointer",children:["\u0418\u043c\u043f\u043e\u0440\u0442 Excel",(0,u.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:async e=>{const t=e.target.files[0];if(!t)return;const n=new FormData;n.append("file",t);try{const e=localStorage.getItem("token"),t=await fetch("".concat(d,"/api/storage-records/import/excel"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:n}),r=await t.json();t.ok?(N(r.message),Ye()):w(r.detail||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0445")}catch(r){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}},className:"hidden"})]})]}),Ze("delete_records")&&(0,u.jsx)("button",{onClick:()=>{ae(!le),ie(new Set)},className:"px-4 py-2 rounded-lg text-sm font-medium ".concat(le?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-600 hover:bg-gray-700 text-white"),children:le?"\u041e\u0442\u043c\u0435\u043d\u0430":"\u041c\u0430\u0441\u0441\u043e\u0432\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f"}),le&&oe.size>0&&(0,u.jsxs)("button",{onClick:async()=>{if(0!==oe.size){if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c ".concat(oe.size," \u0437\u0430\u043f\u0438\u0441\u0435\u0439? \u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435\u043e\u0431\u0440\u0430\u0442\u0438\u043c\u043e."))){x(!0);try{const e=localStorage.getItem("token"),t=await fetch("".concat(d,"/api/storage-records/bulk"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify([...oe])}),n=await t.json();t.ok?(N("\u0423\u0434\u0430\u043b\u0435\u043d\u043e ".concat(n.deleted_count," \u0437\u0430\u043f\u0438\u0441\u0435\u0439")),ae(!1),ie(new Set),Ye()):w(n.detail||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0435\u0439")}catch(e){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}finally{x(!1)}}}else w("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f")},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:["\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 (",oe.size,")"]}),(0,u.jsx)("button",{onClick:()=>h("dashboard"),className:"text-gray-500 hover:text-gray-700 px-3 py-1 rounded-md text-sm font-medium",children:"\u2190 \u041d\u0430\u0437\u0430\u0434"})]})]}),(0,u.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,u.jsx)("input",{type:"text",placeholder:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0424\u0418\u041e",onChange:e=>I(c(c({},M),{},{full_name:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),(0,u.jsx)("input",{type:"text",placeholder:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443",onChange:e=>I(c(c({},M),{},{phone:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),(0,u.jsxs)("select",{onChange:e=>I(c(c({},M),{},{status:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,u.jsx)("option",{value:"",children:"\u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b"}),(0,u.jsx)("option",{value:"\u0412\u0437\u044f\u0442\u0430 \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435",children:"\u0412\u0437\u044f\u0442\u0430 \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"}),(0,u.jsx)("option",{value:"\u0412\u044b\u0434\u0430\u043d\u0430 \u0441 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",children:"\u0412\u044b\u0434\u0430\u043d\u0430 \u0441 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"})]}),(0,u.jsxs)("select",{onChange:e=>I(c(c({},M),{},{storage_location:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,u.jsx)("option",{value:"",children:"\u0412\u0441\u0435 \u043c\u0435\u0441\u0442\u0430"}),(0,u.jsx)("option",{value:"\u0411\u0435\u043a\u0435\u0442\u043e\u0432\u0430 3\u0430.\u043a15",children:"\u0411\u0435\u043a\u0435\u0442\u043e\u0432\u0430 3\u0430.\u043a15"}),(0,u.jsx)("option",{value:"\u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0435 \u0448\u043e\u0441\u0441\u0435 22\u043a1",children:"\u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0435 \u0448\u043e\u0441\u0441\u0435 22\u043a1"})]})]}),A.length>0?(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsx)("div",{className:"h-4 min-w-full"})}),(0,u.jsx)("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:(0,u.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,u.jsx)("thead",{className:"bg-gray-50",children:(0,u.jsxs)("tr",{children:[le&&(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,u.jsx)("input",{type:"checkbox",checked:oe.size===A.length&&A.length>0,onChange:e=>{e.target.checked?ie(new Set(A.map(e=>e.record_id))):ie(new Set)},className:"rounded border-gray-300"})}),(0,u.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ie("record_number"),children:["\u2116 ","record_number"===U.key&&("asc"===U.direction?"\u2191":"\u2193")]}),(0,u.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ie("full_name"),children:[Xe("full_name")," ","full_name"===U.key&&("asc"===U.direction?"\u2191":"\u2193")]}),(0,u.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ie("phone"),children:[Xe("phone")," ","phone"===U.key&&("asc"===U.direction?"\u2191":"\u2193")]}),(0,u.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ie("car_brand"),children:[Xe("car_brand")," ","car_brand"===U.key&&("asc"===U.direction?"\u2191":"\u2193")]}),(0,u.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ie("parameters"),children:[Xe("parameters")," ","parameters"===U.key&&("asc"===U.direction?"\u2191":"\u2193")]}),(0,u.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ie("size"),children:[Xe("size")," ","size"===U.key&&("asc"===U.direction?"\u2191":"\u2193")]}),(0,u.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ie("storage_location"),children:["\u041c\u0435\u0441\u0442\u043e ","storage_location"===U.key&&("asc"===U.direction?"\u2191":"\u2193")]}),(0,u.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ie("status"),children:["\u0421\u0442\u0430\u0442\u0443\u0441 ","status"===U.key&&("asc"===U.direction?"\u2191":"\u2193")]}),(0,u.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>Ie("created_at"),children:["\u0414\u0430\u0442\u0430 ","created_at"===U.key&&("asc"===U.direction?"\u2191":"\u2193")]}),Ze("delete_records")&&(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),(0,u.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(e=>(0,u.jsxs)("tr",{className:"hover:bg-gray-50",children:[le&&(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("input",{type:"checkbox",checked:oe.has(e.record_id),onChange:()=>(e=>{const t=new Set(oe);t.has(e)?t.delete(e):t.add(e),ie(t)})(e.record_id),className:"rounded border-gray-300"})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,u.jsx)("button",{onClick:()=>(async e=>{x(!0);try{const t=localStorage.getItem("token"),n=await fetch("".concat(d,"/api/storage-records/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();te(e.record),re(!0)}else w("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0437\u0430\u043f\u0438\u0441\u0438")}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}finally{x(!1)}})(e.record_id),className:"text-blue-600 hover:text-blue-900 underline",children:e.record_number})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.full_name}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phone}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.car_brand}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.parameters}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.size}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.storage_location}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("\u0412\u0437\u044f\u0442\u0430 \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.created_at).toLocaleDateString("ru-RU")}),Ze("delete_records")&&(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,u.jsx)("button",{onClick:()=>Ue(e.record_id),className:"text-red-600 hover:text-red-900",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]},e.record_id))})]})})]}):(0,u.jsx)("div",{className:"text-center py-8 text-gray-500",children:y?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0437\u0430\u043f\u0438\u0441\u0435\u0439...":"\u0417\u0430\u043f\u0438\u0441\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"})]}),"users"===p&&Ze("user_management")&&(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438"}),(0,u.jsx)("button",{onClick:()=>h("dashboard"),className:"text-gray-500 hover:text-gray-700 px-3 py-1 rounded-md text-sm font-medium",children:"\u2190 \u041d\u0430\u0437\u0430\u0434"})]}),(0,u.jsxs)("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,u.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),x(!0),w("");try{const e=localStorage.getItem("token"),t=await fetch("".concat(d,"/api/users"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(V)});if(t.ok)N("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d"),q({username:"",password:"",role:"user",permissions:["store","view"]}),Je();else{const e=await t.json();w(e.detail||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")}}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}finally{x(!1)}},className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u041b\u043e\u0433\u0438\u043d"}),(0,u.jsx)("input",{type:"text",value:V.username,onChange:e=>q(c(c({},V),{},{username:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,u.jsx)("input",{type:"password",value:V.password,onChange:e=>q(c(c({},V),{},{password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0420\u043e\u043b\u044c"}),(0,u.jsxs)("select",{value:V.role,onChange:e=>q(c(c({},V),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,u.jsx)("option",{value:"user",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),(0,u.jsx)("option",{value:"admin",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"})]})]}),(0,u.jsxs)("div",{className:"md:col-span-3",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u041f\u0440\u0430\u0432\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430"}),(0,u.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["store","release","view","form_management","pdf_management","user_management","delete_records"].map(e=>(0,u.jsxs)("label",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",checked:V.permissions.includes(e),onChange:t=>{t.target.checked?q(c(c({},V),{},{permissions:[...V.permissions,e]})):q(c(c({},V),{},{permissions:V.permissions.filter(t=>t!==e)}))},className:"mr-2"}),(0,u.jsx)("span",{className:"text-sm",children:"store"===e?"\u0417\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c":"release"===e?"\u0412\u044b\u0434\u0430\u0432\u0430\u0442\u044c":"view"===e?"\u041f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c":"form_management"===e?"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u043c\u0438":"pdf_management"===e?"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c PDF":"user_management"===e?"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438":"delete_records"===e?"\u0423\u0434\u0430\u043b\u044f\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438":e})]},e))})]}),(0,u.jsx)("div",{className:"md:col-span-3",children:(0,u.jsx)("button",{type:"submit",disabled:y,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium disabled:opacity-50",children:y?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})]})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold",children:"\u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}),B.map(e=>(0,u.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,u.jsxs)("div",{className:"flex justify-between items-start",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"font-semibold",children:e.username}),(0,u.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0420\u043e\u043b\u044c: ","admin"===e.role?"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440":"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"]}),(0,u.jsxs)("div",{className:"mt-2",children:[(0,u.jsx)("p",{className:"text-sm text-gray-600",children:"\u041f\u0440\u0430\u0432\u0430:"}),(0,u.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.permissions.map(e=>(0,u.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"store"===e?"\u0417\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c":"release"===e?"\u0412\u044b\u0434\u0430\u0432\u0430\u0442\u044c":"view"===e?"\u041f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c":"form_management"===e?"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u043c\u0438":"pdf_management"===e?"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c PDF":"user_management"===e?"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438":"delete_records"===e?"\u0423\u0434\u0430\u043b\u044f\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438":e},e))})]})]}),"admin"!==e.username&&(0,u.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(e,"?")))try{const t=localStorage.getItem("token");(await fetch("".concat(d,"/api/users/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok?(N("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0434\u0430\u043b\u0435\u043d"),Je()):w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")}catch(t){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}})(e.username),className:"text-red-600 hover:text-red-800 text-sm",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})},e.username))]})]}),"form-config"===p&&Ze("form_management")&&(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b \u0437\u0430\u043f\u0438\u0441\u0438"}),(0,u.jsx)("button",{onClick:()=>h("dashboard"),className:"text-gray-500 hover:text-gray-700 px-3 py-1 rounded-md text-sm font-medium",children:"\u2190 \u041d\u0430\u0437\u0430\u0434"})]}),(0,u.jsx)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,u.jsxs)("p",{className:"text-yellow-800 text-sm",children:[(0,u.jsx)("strong",{children:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435:"}),' \u041f\u043e\u043b\u044f "\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440", "\u0412\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f", "\u0421\u0442\u0430\u0442\u0443\u0441" \u0438 "\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f" \u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043b\u0438 \u0443\u0434\u0430\u043b\u0438\u0442\u044c. \u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044f \u043e\u043d\u043e \u0443\u0434\u0430\u043b\u044f\u0435\u0442\u0441\u044f \u0438 \u0443 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439.']})}),g&&(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold",children:"\u041f\u043e\u043b\u044f \u0444\u043e\u0440\u043c\u044b:"}),(0,u.jsx)("button",{onClick:()=>{const e={name:"custom_field_".concat(Date.now()),label:"\u041d\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435",type:"text",required:!1};b(c(c({},g),{},{fields:[...g.fields,e]}))},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u0435"})]}),g.fields.map((e,t)=>(0,u.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 cursor-move transition-colors hover:bg-gray-50",draggable:!0,onDragStart:e=>((e,t)=>{X(t),e.dataTransfer.effectAllowed="move"})(e,t),onDragOver:We,onDrop:e=>((e,t)=>{if(e.preventDefault(),null===G||G===t)return void X(null);const n=[...g.fields],r=n[G];n.splice(G,1),n.splice(t,0,r),b(c(c({},g),{},{fields:n})),X(null)})(e,t),children:[(0,u.jsxs)("div",{className:"flex items-center mb-3",children:[(0,u.jsx)("span",{className:"text-gray-400 mr-2 text-lg",children:"\u2261"}),(0,u.jsx)("span",{className:"text-sm text-gray-600",children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0434\u043b\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u0440\u044f\u0434\u043a\u0430"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f"}),(0,u.jsx)("input",{type:"text",value:e.name,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm bg-gray-100",disabled:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u041c\u0435\u0442\u043a\u0430"}),(0,u.jsx)("input",{type:"text",value:e.label,onChange:e=>{const n=[...g.fields];n[t].label=e.target.value,b(c(c({},g),{},{fields:n}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0422\u0438\u043f"}),(0,u.jsxs)("select",{value:e.type,onChange:e=>{const n=[...g.fields];n[t].type=e.target.value,b(c(c({},g),{},{fields:n}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,u.jsx)("option",{value:"text",children:"\u0422\u0435\u043a\u0441\u0442"}),(0,u.jsx)("option",{value:"tel",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,u.jsx)("option",{value:"email",children:"Email"}),(0,u.jsx)("option",{value:"select",children:"\u0412\u044b\u0431\u043e\u0440"})]})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"}),(0,u.jsx)("input",{type:"checkbox",checked:e.required||!1,onChange:e=>{const n=[...g.fields];n[t].required=e.target.checked,b(c(c({},g),{},{fields:n}))},className:"mt-2"})]}),e.name.startsWith("custom_field_")&&(0,u.jsx)("button",{onClick:()=>{if(window.confirm("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e \u043f\u043e\u043b\u0435? \u0414\u0430\u043d\u043d\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439.")){const e=g.fields.filter((e,n)=>n!==t);b(c(c({},g),{},{fields:e}))}},className:"text-red-600 hover:text-red-800 text-sm px-2 py-1",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]}),"select"===e.type&&(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u0432\u044b\u0431\u043e\u0440\u0430 (\u043f\u043e \u043e\u0434\u043d\u043e\u043c\u0443 \u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0443)"}),(0,u.jsx)("textarea",{value:e.options?e.options.join("\n"):"",onChange:e=>{const n=[...g.fields];n[t].options=e.target.value.split("\n").filter(e=>e.trim()),b(c(c({},g),{},{fields:n}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",rows:"3"})]})]},t)),(0,u.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,u.jsx)("button",{onClick:async()=>{try{const e=localStorage.getItem("token");(await fetch("".concat(d,"/api/form-config"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({fields:g.fields})})).ok?(N("\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0444\u043e\u0440\u043c\u044b \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430"),$e()):w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438")}catch(e){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"}),(0,u.jsx)("button",{onClick:()=>$e(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})]})]})]}),"pdf-config"===p&&Ze("pdf_management")&&(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b \u0410\u043a\u0442\u0430"}),(0,u.jsx)("button",{onClick:()=>h("dashboard"),className:"text-gray-500 hover:text-gray-700 px-3 py-1 rounded-md text-sm font-medium",children:"\u2190 \u041d\u0430\u0437\u0430\u0434"})]}),(0,u.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,u.jsx)("p",{className:"text-blue-800 text-sm mb-2",children:(0,u.jsx)("strong",{children:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u043f\u043e\u0434\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438:"})}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-blue-700",children:[(0,u.jsxs)("span",{children:["{","full_name","}"," - \u0424\u0418\u041e"]}),(0,u.jsxs)("span",{children:["{","phone","}"," - \u0422\u0435\u043b\u0435\u0444\u043e\u043d"]}),(0,u.jsxs)("span",{children:["{","parameters","}"," - \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b"]}),(0,u.jsxs)("span",{children:["{","size","}"," - \u0420\u0430\u0437\u043c\u0435\u0440"]}),(0,u.jsxs)("span",{children:["{","storage_location","}"," - \u041c\u0435\u0441\u0442\u043e \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"]}),(0,u.jsxs)("span",{children:["{","record_number","}"," - \u041d\u043e\u043c\u0435\u0440 \u0430\u043a\u0442\u0430"]}),(0,u.jsxs)("span",{children:["{","created_at","}"," - \u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"]}),(0,u.jsxs)("span",{children:["{","car_brand","}"," - \u041c\u0430\u0440\u043a\u0430 \u043c\u0430\u0448\u0438\u043d\u044b"]})]})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0428\u0430\u0431\u043b\u043e\u043d PDF \u0430\u043a\u0442\u0430"}),(0,u.jsx)("textarea",{value:K,onChange:e=>Y(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"8",placeholder:"\u042f {full_name}, {phone}, \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 {parameters}, {size}, \u0432 \u0428\u0438\u043d\u043d\u043e\u043c \u0411\u044e\u0440\u043e \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 {storage_location}, \u043d\u043e\u043c\u0435\u0440 \u0430\u043a\u0442\u0430 {record_number} {created_at}. \u041f\u043e\u0434\u043f\u0438\u0441\u044c: _________________"})]}),(0,u.jsxs)("div",{className:"flex space-x-4",children:[(0,u.jsx)("button",{onClick:async()=>{try{const e=localStorage.getItem("token");(await fetch("".concat(d,"/api/pdf-template"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({template:K})})).ok?N("\u0428\u0430\u0431\u043b\u043e\u043d PDF \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"):w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0448\u0430\u0431\u043b\u043e\u043d\u0430")}catch(e){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}},className:"bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg font-medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d"}),(0,u.jsx)("button",{onClick:Ve,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445"}),(0,u.jsx)("button",{onClick:()=>{Y(""),Z(!1)},className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium",children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043a \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"})]}),K&&(0,u.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,u.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440:"}),(0,u.jsx)("div",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:K.replace(/{(\w+)}/g,(e,t)=>({full_name:"\u0418\u0432\u0430\u043d\u043e\u0432 \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447",phone:"+7-999-123-45-67",parameters:"215/60/R16",size:"4 \u0448\u0442",storage_location:"\u0411\u0435\u043a\u0435\u0442\u043e\u0432\u0430 3\u0430.\u043a15",record_number:"123",created_at:(new Date).toLocaleDateString("ru-RU"),car_brand:"Toyota Camry"}[t]||e))})]})]})]}),"calculator-admin"===p&&(0,u.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,u.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,u.jsxs)("div",{className:"mb-8",children:[(0,u.jsx)("button",{onClick:()=>h("dashboard"),className:"text-gray-500 hover:text-gray-700 mb-4",children:"\u2190 \u041d\u0430\u0437\u0430\u0434 \u043a \u043f\u0430\u043d\u0435\u043b\u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f"}),(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u043e\u043c \u0448\u0438\u043d\u043e\u043c\u043e\u043d\u0442\u0430\u0436\u0430"})]}),(0,u.jsx)("div",{className:"mb-6",children:(0,u.jsxs)("div",{className:"flex space-x-4",children:[(0,u.jsx)("button",{onClick:()=>{Te("passenger"),Me()},className:"px-6 py-3 rounded-lg font-medium ".concat("passenger"===Pe?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"\u041b\u0435\u0433\u043a\u043e\u0432\u043e\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442"}),(0,u.jsx)("button",{onClick:()=>{Te("truck"),Me()},className:"px-6 py-3 rounded-lg font-medium ".concat("truck"===Pe?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"\u0413\u0440\u0443\u0437\u043e\u0432\u043e\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442"})]})}),Ee[Pe]&&(0,u.jsxs)("div",{className:"space-y-8",children:[(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u041e\u0431\u0449\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,u.jsx)("input",{type:"text",value:(null===(e=Ee[Pe])||void 0===e?void 0:e.name)||"",onChange:e=>ze(t=>c(c({},t),{},{[Pe]:c(c({},t[Pe]),{},{name:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0437\u0430 \u0447\u0430\u0441 (\u0440\u0443\u0431\u043b\u0435\u0439)"}),(0,u.jsx)("input",{type:"number",value:(null===(t=Ee[Pe])||void 0===t?void 0:t.hourly_rate)||0,onChange:e=>ze(t=>c(c({},t),{},{[Pe]:c(c({},t[Pe]),{},{hourly_rate:parseInt(e.target.value)||0})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u0423\u0441\u043b\u0443\u0433\u0438"}),(0,u.jsx)("div",{className:"space-y-4",children:null===(n=Ee[Pe])||void 0===n||null===(l=n.services)||void 0===l?void 0:l.map((e,t)=>(0,u.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438"}),(0,u.jsx)("input",{type:"text",value:e.name,onChange:e=>{const n=c({},Ee);n[Pe].services[t].name=e.target.value,ze(n)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,u.jsx)("input",{type:"text",value:e.description,onChange:e=>{const n=c({},Ee);n[Pe].services[t].description=e.target.value,ze(n)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043f\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430\u043c (\u043c\u0438\u043d\u0443\u0442\u044b)"}),(0,u.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(e.time_by_size).map(e=>{let[n,r]=e;return(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsxs)("label",{className:"text-sm text-gray-600 w-12",children:[n,":"]}),(0,u.jsx)("input",{type:"number",value:r,onChange:e=>{const r=c({},Ee);r[Pe].services[t].time_by_size[n]=parseInt(e.target.value)||0,ze(r)},className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500"})]},n)})})]})]},e.id))})]}),(0,u.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,u.jsx)("button",{onClick:()=>(async(e,t)=>{try{const n=localStorage.getItem("token");(await fetch("".concat(d,"/api/admin/calculator/settings/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify(t)})).ok?(N("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"),Me()):w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a")}catch(n){w("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}})(Pe,Ee[Pe]),className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})})]})]})}),"public-calculator"===p&&(0,u.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,u.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,u.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 \u0428\u0438\u043d\u043e\u043c\u043e\u043d\u0442\u0430\u0436\u0430"}),(0,u.jsx)("p",{className:"text-gray-600 mb-8",children:"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0443\u0441\u043b\u0443\u0433 \u0448\u0438\u043d\u043e\u043c\u043e\u043d\u0442\u0430\u0436\u0430 \u043e\u043d\u043b\u0430\u0439\u043d"}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"}),(0,u.jsxs)("div",{className:"flex space-x-4",children:[(0,u.jsx)("button",{onClick:()=>{de("passenger"),De("passenger")},className:"px-6 py-3 rounded-lg font-medium ".concat("passenger"===ue?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"\u041b\u0435\u0433\u043a\u043e\u0432\u043e\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c"}),(0,u.jsx)("button",{onClick:()=>{de("truck"),De("truck")},className:"px-6 py-3 rounded-lg font-medium ".concat("truck"===ue?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"\u0413\u0440\u0443\u0437\u043e\u0432\u043e\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c"})]})]}),se[ue]&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0438\u043d"}),(0,u.jsx)("select",{value:fe,onChange:e=>me(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.keys((null===(a=se[ue].services[0])||void 0===a?void 0:a.time_by_size)||{}).map(e=>(0,u.jsx)("option",{value:e,children:e},e))})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043b\u0435\u0441"}),(0,u.jsx)("div",{className:"flex space-x-4",children:[1,2,4].map(e=>(0,u.jsxs)("button",{onClick:()=>he(e),className:"px-4 py-2 rounded-lg font-medium ".concat(pe===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[e," ",1===e?"\u043a\u043e\u043b\u0435\u0441\u043e":"\u043a\u043e\u043b\u0435\u0441\u0430"]},e))})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0423\u0441\u043b\u0443\u0433\u0438"}),(0,u.jsx)("div",{className:"space-y-3",children:se[ue].services.map(e=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",id:e.id,checked:ge.includes(e.id),onChange:()=>Ae(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,u.jsxs)("div",{className:"ml-3",children:[(0,u.jsx)("label",{htmlFor:e.id,className:"text-sm font-medium text-gray-900 cursor-pointer",children:e.name}),(0,u.jsxs)("p",{className:"text-sm text-gray-500",children:[e.time_by_size[fe]||0," \u043c\u0438\u043d/\u043a\u043e\u043b\u0435\u0441\u043e"]})]})]}),(0,u.jsx)("div",{className:"flex items-center",children:(0,u.jsx)("button",{onClick:()=>je(e.name,e.description),className:"text-blue-600 hover:text-blue-800 ml-2",children:(0,u.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})})]},e.id))})]}),se[ue].additional_options.length>0&&(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u043f\u0446\u0438\u0438"}),(0,u.jsx)("div",{className:"space-y-3",children:se[ue].additional_options.map(e=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",id:e.id,checked:ye.includes(e.id),onChange:()=>Fe(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,u.jsxs)("div",{className:"ml-3",children:[(0,u.jsx)("label",{htmlFor:e.id,className:"text-sm font-medium text-gray-900 cursor-pointer",children:e.name}),(0,u.jsxs)("p",{className:"text-sm text-gray-500",children:["\xd7",e.time_multiplier]})]})]}),(0,u.jsx)("button",{onClick:()=>je(e.name,e.description),className:"text-blue-600 hover:text-blue-800 ml-2",children:(0,u.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})]},e.id))})]}),ve&&(0,u.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0440\u0430\u0441\u0447\u0435\u0442\u0430"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-blue-700",children:"\u041e\u0431\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f:"}),(0,u.jsxs)("p",{className:"text-xl font-bold text-blue-900",children:[ve.total_time," \u043c\u0438\u043d\u0443\u0442"]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-blue-700",children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c:"}),(0,u.jsxs)("p",{className:"text-xl font-bold text-blue-900",children:[ve.total_cost," \u0440\u0443\u0431\u043b\u0435\u0439"]})]})]}),(0,u.jsx)("button",{onClick:Re,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"})]})]})]})})})}),"calculator-result"===p&&ke&&(0,u.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,u.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,u.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0440\u0430\u0441\u0447\u0435\u0442\u0430"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b"}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{className:"font-medium",children:"\u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430:"})," ","passenger"===ke.calculation.vehicle_type?"\u041b\u0435\u0433\u043a\u043e\u0432\u043e\u0439":"\u0413\u0440\u0443\u0437\u043e\u0432\u043e\u0439"]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{className:"font-medium",children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0438\u043d:"})," ",ke.calculation.tire_size]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{className:"font-medium",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043b\u0435\u0441:"})," ",ke.calculation.wheel_count]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{className:"font-medium",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c:"})," ",ke.calculation.total_cost," \u0440\u0443\u0431\u043b\u0435\u0439"]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{className:"font-medium",children:"\u0414\u0430\u0442\u0430 \u0440\u0430\u0441\u0447\u0435\u0442\u0430:"})," ",new Date(ke.created_at).toLocaleDateString("ru-RU")]})]})]})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438"}),(0,u.jsx)("div",{className:"space-y-2",children:ke.calculation.breakdown.services.map(e=>(0,u.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,u.jsx)("span",{children:e.name}),(0,u.jsxs)("span",{children:[e.total_time," \u043c\u0438\u043d"]})]},e.id))})]}),(0,u.jsxs)("div",{className:"flex space-x-4",children:[(0,u.jsx)("button",{onClick:()=>window.location.href="/calculator",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0440\u0430\u0441\u0447\u0435\u0442"}),(0,u.jsx)("button",{onClick:()=>window.print(),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium",children:"\u041f\u0435\u0447\u0430\u0442\u044c"})]})]})})})}),je&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-xl p-6 max-w-md w-full mx-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:_e.title}),(0,u.jsx)("button",{onClick:()=>Se(!1),className:"text-gray-400 hover:text-gray-600",children:(0,u.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,u.jsx)("p",{className:"text-gray-600 mb-4",children:_e.description}),(0,u.jsx)("button",{onClick:()=>Se(!1),className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e"})]})}),"public-calculator"===p&&(0,u.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,u.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,u.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 \u0428\u0438\u043d\u043e\u043c\u043e\u043d\u0442\u0430\u0436\u0430"}),(0,u.jsx)("p",{className:"text-gray-600 mb-8",children:"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0443\u0441\u043b\u0443\u0433 \u0448\u0438\u043d\u043e\u043c\u043e\u043d\u0442\u0430\u0436\u0430 \u043e\u043d\u043b\u0430\u0439\u043d"}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"}),(0,u.jsxs)("div",{className:"flex space-x-4",children:[(0,u.jsx)("button",{onClick:()=>{de("passenger"),De("passenger")},className:"px-6 py-3 rounded-lg font-medium ".concat("passenger"===ue?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"\u041b\u0435\u0433\u043a\u043e\u0432\u043e\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c"}),(0,u.jsx)("button",{onClick:()=>{de("truck"),De("truck")},className:"px-6 py-3 rounded-lg font-medium ".concat("truck"===ue?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"\u0413\u0440\u0443\u0437\u043e\u0432\u043e\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c"})]})]}),se[ue]&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0438\u043d"}),(0,u.jsx)("select",{value:fe,onChange:e=>me(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.keys((null===(o=se[ue].services[0])||void 0===o?void 0:o.time_by_size)||{}).map(e=>(0,u.jsx)("option",{value:e,children:e},e))})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043b\u0435\u0441"}),(0,u.jsx)("div",{className:"flex space-x-4",children:[1,2,4].map(e=>(0,u.jsxs)("button",{onClick:()=>he(e),className:"px-4 py-2 rounded-lg font-medium ".concat(pe===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[e," ",1===e?"\u043a\u043e\u043b\u0435\u0441\u043e":"\u043a\u043e\u043b\u0435\u0441\u0430"]},e))})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0423\u0441\u043b\u0443\u0433\u0438"}),(0,u.jsx)("div",{className:"space-y-3",children:se[ue].services.map(e=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",id:e.id,checked:ge.includes(e.id),onChange:()=>Ae(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,u.jsxs)("div",{className:"ml-3",children:[(0,u.jsx)("label",{htmlFor:e.id,className:"text-sm font-medium text-gray-900 cursor-pointer",children:e.name}),(0,u.jsxs)("p",{className:"text-sm text-gray-500",children:[e.time_by_size[fe]||0," \u043c\u0438\u043d/\u043a\u043e\u043b\u0435\u0441\u043e"]})]})]}),(0,u.jsx)("div",{className:"flex items-center",children:(0,u.jsx)("button",{onClick:()=>je(e.name,e.description),className:"text-blue-600 hover:text-blue-800 ml-2",children:(0,u.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})})]},e.id))})]}),se[ue].additional_options.length>0&&(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u043f\u0446\u0438\u0438"}),(0,u.jsx)("div",{className:"space-y-3",children:se[ue].additional_options.map(e=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",id:e.id,checked:ye.includes(e.id),onChange:()=>Fe(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,u.jsxs)("div",{className:"ml-3",children:[(0,u.jsx)("label",{htmlFor:e.id,className:"text-sm font-medium text-gray-900 cursor-pointer",children:e.name}),(0,u.jsxs)("p",{className:"text-sm text-gray-500",children:["\xd7",e.time_multiplier]})]})]}),(0,u.jsx)("button",{onClick:()=>je(e.name,e.description),className:"text-blue-600 hover:text-blue-800 ml-2",children:(0,u.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})]},e.id))})]}),ve&&(0,u.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0440\u0430\u0441\u0447\u0435\u0442\u0430"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-blue-700",children:"\u041e\u0431\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f:"}),(0,u.jsxs)("p",{className:"text-xl font-bold text-blue-900",children:[ve.total_time," \u043c\u0438\u043d\u0443\u0442"]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-blue-700",children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c:"}),(0,u.jsxs)("p",{className:"text-xl font-bold text-blue-900",children:[ve.total_cost," \u0440\u0443\u0431\u043b\u0435\u0439"]})]})]}),(0,u.jsx)("button",{onClick:Re,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"})]})]})]})})})}),je&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-xl p-6 max-w-md w-full mx-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:_e.title}),(0,u.jsx)("button",{onClick:()=>Se(!1),className:"text-gray-400 hover:text-gray-600",children:(0,u.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,u.jsx)("p",{className:"text-gray-600 mb-4",children:_e.description}),(0,u.jsx)("button",{onClick:()=>Se(!1),className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e"})]})}),ne&&ee&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-xl p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["\u0417\u0430\u043f\u0438\u0441\u044c \u2116 ",ee.record_number]}),(0,u.jsx)("button",{onClick:()=>{re(!1),te(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u0424\u0418\u041e"}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:ee.full_name})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:ee.phone})]}),ee.phone_additional&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u0414\u043e\u043f. \u0442\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:ee.phone_additional})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u041c\u0430\u0440\u043a\u0430 \u043c\u0430\u0448\u0438\u043d\u044b"}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:ee.car_brand})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b"}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:ee.parameters})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u0420\u0430\u0437\u043c\u0435\u0440/\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:ee.size})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u041c\u0435\u0441\u0442\u043e \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:ee.storage_location})]})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0438 \u0434\u0430\u043d\u043d\u044b\u0435"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,u.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-semibold rounded-full ".concat("\u0412\u0437\u044f\u0442\u0430 \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"===ee.status?"bg-green-100 text-green-800":"\u041d\u043e\u0432\u0430\u044f"===ee.status?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:ee.status})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:new Date(ee.created_at).toLocaleString("ru-RU")})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u0421\u043e\u0437\u0434\u0430\u043b"}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:ee.created_by})]}),ee.retailcrm_order_number&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430 CRM"}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:ee.retailcrm_order_number})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0432 Retail"}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:ee.retail_status_text})]}),Object.entries(ee).map(e=>{let[t,n]=e;return t.startsWith("custom_field_")&&n?(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t.replace("custom_field_","\u041f\u043e\u043b\u0435 ")}),(0,u.jsx)("p",{className:"text-sm text-gray-900",children:n})]},t):null})]})]}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-4 mt-8 pt-6 border-t",children:["\u041d\u043e\u0432\u0430\u044f"===ee.status&&Ze("store")&&(0,u.jsx)("button",{onClick:()=>{Qe(ee.record_id),re(!1)},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium",children:"\u0412\u0437\u044f\u0442\u044c \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"}),"\u0412\u0437\u044f\u0442\u0430 \u043d\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"===ee.status&&Ze("release")&&(0,u.jsx)("button",{onClick:()=>{Ke(ee.record_id),re(!1)},className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium",children:"\u0412\u044b\u0434\u0430\u0442\u044c \u0441 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"}),(0,u.jsx)("button",{onClick:()=>Ge(ee.record_id),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium",children:"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0430\u043a\u0442"}),Ze("delete_records")&&(0,u.jsx)("button",{onClick:()=>{Ue(ee.record_id),re(!1)},className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg font-medium",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c"})]})]})})]})]}):(0,u.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-xl p-8 w-full max-w-md",children:[(0,u.jsxs)("div",{className:"text-center mb-8",children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\u0425\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0428\u0438\u043d"}),(0,u.jsx)("p",{className:"text-gray-600",children:"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c"})]}),(0,u.jsxs)("form",{onSubmit:Be,className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u041b\u043e\u0433\u0438\u043d"}),(0,u.jsx)("input",{type:"text",value:j.username,onChange:e=>S(c(c({},j),{},{username:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,u.jsx)("input",{type:"password",value:j.password,onChange:e=>S(c(c({},j),{},{password:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),v&&(0,u.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:v}),(0,u.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 font-medium",children:y?"\u0412\u0445\u043e\u0434...":"\u0412\u043e\u0439\u0442\u0438"})]})]})})};l.createRoot(document.getElementById("root")).render((0,u.jsx)(r.StrictMode,{children:(0,u.jsx)(f,{})}))})();
//# sourceMappingURL=main.39c4e7f3.js.map